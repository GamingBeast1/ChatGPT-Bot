from pyrogram import Client, filters
from config import LOG_CHANNEL
from plugins.database import db
from pyrogram.types import (
    InlineKeyboardMarkup,
    InlineKeyboardButton,
    CallbackQuery,
    Message
)


LOG_TEXT = """<b>#NewUser
    
ID - <code>{}</code>

N·¥Ä·¥ç·¥á - {}</b>
"""

@Client.on_message(filters.command('start'))
async def start_message(c,m):
    await db.is_user_exist(m.from_user.id)
    await db.add_user(m.from_user.id, m.from_user.first_name)
    await c.send_message(LOG_CHANNEL, LOG_TEXT.format(m.from_user.id, m.from_user.mention))
    await m.reply_photo(f"https://te.legra.ph/file/119729ea3cdce4fefb6a1.jpg"),
        caption="** ú…™** üëã\n\n**…™ ·¥Ä·¥ç ·¥Ä ·¥Ñ ú·¥Ä·¥õ…¢·¥ò·¥õ  ô·¥è·¥õ**\n\n‚≠ï **·¥ò·¥è·¥°·¥á Ä·¥á·¥Ö  ô è :-** **[T·¥á·¥Ñ ú VJ](https://t.me/vj_botz)**",
        reply_markup=InlineKeyboardMarkup(
                [
                    [
                        InlineKeyboardButton('üíù s·¥ú ôs·¥Ñ Ä…™ ô·¥á  è·¥è·¥ú·¥õ·¥ú ô·¥á ·¥Ñ ú·¥Ä…¥…¥·¥á ü', url='https://youtube.com/@Tech_VJ')
                    ],  
                    [
                        InlineKeyboardButton("‚ù£Ô∏è ·¥Ö·¥á·¥†·¥á ü·¥è·¥ò·¥á Ä", url='https://t.me/Kingvj01'),
                        InlineKeyboardButton("ü§ñ ·¥ú·¥ò·¥Ö·¥Ä·¥õ·¥á", callback_data='about')
                    ]
                ]
            )
        
ABOUT_TXT = """Hello"""
  
elif query.data == "about":
        buttons = [[
            InlineKeyboardButton('üìÑS·¥è·¥ú Ä·¥Ñ·¥á', callback_data='source'),
            InlineKeyboardButton('üë®üèª‚ÄçüíªO·¥°…¥·¥á Ä', callback_data='owner')
        ],[
            InlineKeyboardButton('H·¥è·¥ç·¥á', callback_data='start'),
            InlineKeyboardButton('üîí C ü·¥ès·¥á', callback_data='close_data')
        ]]
        await client.edit_message_media(
            query.message.chat.id, 
            query.message.id, 
            InputMediaPhoto("https://te.legra.ph/file/119729ea3cdce4fefb6a1.jpg")
        )
        reply_markup = InlineKeyboardMarkup(buttons)
        await query.message.edit_text(
            text="‚ñ† ‚ñ£ ‚ñ£"
        )
        await query.message.edit_text(
            text="‚ñ† ‚ñ† ‚ñ£"
        )
        await query.message.edit_text(
            text="‚ñ† ‚ñ† ‚ñ†"
        )
        me2 = (await client.get_me()).mention
        await query.message.edit_text(
            text=ABOUT_TXT,
            reply_markup=reply_markup,
            parse_mode=enums.ParseMode.HTML
        )